<div class="page-content">
  <div class="top-content">
    <h3 class="title">Search:</h3>
    <form [formGroup]="searchForm" (submit)="onSubmit($event)">
      <div class="top-panel">
        <mat-form-field class="searchfield" appearance="fill">
          <input matInput formControlName="search" (input)="onChange()" />
          <button
            mat-icon-button
            type="button"
            appearance="outlined"
            matSuffix
            *ngIf="searchForm.get('search')?.value"
            (click)="searchForm.get('search')?.setValue('')"
          >
            <mat-icon>
              <span class="material-symbols-outlined"> cancel </span>
            </mat-icon>
          </button>
        </mat-form-field>
        <button mat-fab appearence="fill" class="button" type="submit">
          <mat-icon class="search">search</mat-icon>
        </button>
      </div>
    </form>
  </div>
  <div class="divider"></div>
  <h3 class="title">Users:</h3>
  <div class="user-results-panel">
    <div *ngIf="searchResults && searchResults.length > 0">
      <div *ngFor="let result of searchResults">
        <button mat-button (click)="goToUserProfile(result._id)">
          <mat-icon>person</mat-icon>
          {{ result.username }}
        </button>
      </div>
    </div>
  </div>
  <div class="divider"></div>
  <h3 class="title">Communities:</h3>

  <div class="community-panel">
    <div class="community-panel" *ngIf="communitySearchResults && communitySearchResults.length > 0">
      <div class="community-box" *ngFor="let community of communitySearchResults">
        <div class="cover">
          <!-- Placeholder image, update as needed -->
          <img src="{{community.banner}}" class="image-preview" />
        </div>
        <div class="name-box">
          <div class="divider-community"></div>
          <h3 class="name" (click)="goToCommunityProfile(community._id)">{{ community.name }}</h3>
        </div>
        <div class="count-box">
          <div class="divider-community"></div>
          <!-- Placeholder for members count, not sure if followers = members -->
          <h6 class="members">Members: {{ community.followers.length }}</h6>
        </div>
        <div class="info">
          <div class="divider-community"></div>
          <p>{{ community.description }}</p>
        </div>
      </div>
    </div>
  </div>
  
</div>
